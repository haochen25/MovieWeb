@using MovieWeb.Services
@inject ICurrentUser CurrentUser

@if (CurrentUser.IsAuthenticated)
{
    <div class="dropdown d-inline-block">
        <a class="nav-link dropdown-toggle text-decoration-none fw-semibold" href="#" role="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person-circle me-1"></i>@CurrentUser.FullName
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="userDropdown">
            <li>
                <a class="dropdown-item" asp-controller="User" asp-action="Favorites">
                    <i class="bi bi-heart me-2 text-danger"></i>Favorites
                </a>
            </li>
            <li>
                <a class="dropdown-item" asp-controller="User" asp-action="Purchases">
                    <i class="bi bi-bag-check me-2 text-primary"></i>Purchases
                </a>
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
                <form method="post" asp-controller="Account" asp-action="Logout" class="px-3">
                    <button type="submit" class="btn btn-outline-danger btn-sm w-100">
                        <i class="bi bi-box-arrow-right me-1"></i>Logout
                    </button>
                </form>
            </li>
        </ul>
    </div>
}
else
{
    <div class="d-flex align-items-center gap-2">
        <a class="btn btn-outline-primary btn-sm px-3" asp-controller="Account" asp-action="Login">
            <i class="bi bi-box-arrow-in-right me-1"></i>Login
        </a>
        <a class="btn btn-primary btn-sm px-3" asp-controller="Account" asp-action="Register">
            <i class="bi bi-person-plus me-1"></i>Register
        </a>
    </div>
}
